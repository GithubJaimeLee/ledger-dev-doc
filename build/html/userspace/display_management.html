

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Display Management &mdash; Ledger Documentation Hub 2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced Display Management" href="advanced_display_management.html" />
    <link rel="prev" title="Writing Apps" href="writing_apps.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ledger Documentation Hub
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Background Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/personal_security_devices.html">Personal Security Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/master_seed.html">The Master Seed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/hd_keys.html">HD Key Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/hd_use_cases.html">Applications of HD Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/application_isolation.html">Application Isolation</a></li>
</ul>
<p class="caption"><span class="caption-text">BOLOS Platform</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bolos/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bolos/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bolos/features.html">BOLOS Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bolos/hardware_architecture.html">Hardware Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bolos/application_environment.html">Application Environment</a></li>
</ul>
<p class="caption"><span class="caption-text">Userspace Development</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_apps.html">Writing Apps</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Display Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#on-screen-display">On-screen display</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#screens-and-flows">Screens and Flows</a></li>
<li class="toctree-l3"><a class="reference internal" href="#declaring-steps">Declaring steps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#layouts">Layouts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#menu">Menu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signing-a-transaction">Signing a transaction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-display-management">Advanced display management</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_display_management.html">Advanced Display Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="syscalls.html">Interaction Between BOLOS and Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="application_structure.html">Application Structure and I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="memory.html">Persistent Storage and PIC</a></li>
<li class="toctree-l1"><a class="reference internal" href="alignment.html">Memory alignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Common Pitfalls and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Application Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="speculos.html">Emulating devices with Speculos</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../additional/publishing_an_app.html">Publishing an Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional/external_docs.html">External Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional/security_guidelines.html">Developing Secure Ledger Apps</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ledger Documentation Hub</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Display Management</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/userspace/display_management.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="display-management">
<h1>Display Management<a class="headerlink" href="#display-management" title="Permalink to this headline">¶</a></h1>
<div class="section" id="on-screen-display">
<h2>On-screen display<a class="headerlink" href="#on-screen-display" title="Permalink to this headline">¶</a></h2>
<div class="section" id="screens-and-flows">
<h3>Screens and Flows<a class="headerlink" href="#screens-and-flows" title="Permalink to this headline">¶</a></h3>
<p>Displaying information on the devices is done by defining a <code class="code docutils literal notranslate"><span class="pre">flow</span></code>.
Think of a flow as a set of screens that will be displayed to the user.
The user will be able to navigate the flow using left and right buttons.</p>
<p>The macro <code class="code docutils literal notranslate"><span class="pre">UX_FLOW</span></code> lets you define a flow. It first takes the name of the flow you are defining, and then the different steps of your flow.</p>
<p>Here’s an example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UX_FLOW</span><span class="p">(</span><span class="n">ux_sign_transaction</span><span class="p">,</span>                <span class="c1">// Name of the flow</span>
            <span class="o">&amp;</span><span class="n">step_destination_address</span><span class="p">,</span>      <span class="c1">// Reference to the first step</span>
            <span class="o">&amp;</span><span class="n">step_display_amount</span><span class="p">,</span>               <span class="c1">// Reference to second step</span>
            <span class="o">&amp;</span><span class="n">step_display_transaction_fees</span><span class="p">,</span>     <span class="c1">// etc...</span>
            <span class="o">&amp;</span><span class="n">step_display_approve_step</span><span class="p">,</span>
            <span class="o">&amp;</span><span class="n">step_display_reject_step</span>
            <span class="p">);</span>
</pre></div>
</div>
<p>“<em>But what are those steps? Where can I find them?</em>” you ask? Well, they’re yours to declare in your app! Let’s have a look at how you can declare those!</p>
</div>
<div class="section" id="declaring-steps">
<h3>Declaring steps<a class="headerlink" href="#declaring-steps" title="Permalink to this headline">¶</a></h3>
<p>A step is declared using one of the macros provided by the SDK. Here’s a list of the <strong>most used ones</strong> (a more exhaustive list is available by looking at the SDK source code!):</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_NOCB</span></code> : Your bread and butter step. A step that simply <strong>displays information on-screen</strong>, without having any callback function (hence the <code class="code docutils literal notranslate"><span class="pre">NOCB</span></code> annotation!). This is used to display information to the user (display a public key, display the network name…).</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_CB</span></code> : Another widely used step declaration. You need to <strong>associate a callback function</strong> (hence the <code class="code docutils literal notranslate"><span class="pre">CB</span></code> annotation!) that will be called if the <strong>user presses both buttons simultaneously</strong>. This is used mainly at the end of a flow, to either APPROVE or REJECT a signature for example.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">FLOW_LOOP</span></code> : This is a special macro that that doesn’t take any arguments. Put it as the last step of your <code class="code docutils literal notranslate"><span class="pre">UX_FLOW</span></code> declaration, and the flow will wrap around: pressing the left button on the first screen will display to the last screen, and pressing the right button on the last screen will jump right to the first screen!</p></li>
</ul>
<p>Looking back at our previous flow (the <code class="code docutils literal notranslate"><span class="pre">ux_display_pubkey_flow</span></code>), you can guess which steps were declared with <code class="code docutils literal notranslate"><span class="pre">UX_STEP_NOCB</span></code> and <code class="code docutils literal notranslate"><span class="pre">UX_STEP_CB</span></code>!</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Previous example explained</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Step</p></th>
<th class="head"><p>STEP_MACRO</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ux_display_destination_address</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_NOCB</span></code></p></td>
<td><p>This step will just display the destination address to the user, we’re not expecting him to confirm or reject.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">ux_display_amount</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_NOCB</span></code></p></td>
<td><p>This step will just display the amount to the user, we’re not expecting him to confirm or reject.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ux_display_transaction_fees</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_NOCB</span></code></p></td>
<td><p>This step will just display the transaction fees to the user, we’re not expecting him to confirm or reject.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">ux_display_approve_step</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_CB</span></code></p></td>
<td><p>This step will prompt the user to CONFIRM that he wishes to sign the transaction. If the user presses both button, the application will call the callback function associated with this step (the code to sign a transaction!).</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ux_display_reject_step</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">UX_STEP_CB</span></code></p></td>
<td><p>This step will prompt the user to REJECT the signature of the transaction. If the user presses both button, the application will the callback function associated with this step (the code to reject the transaction signature).</p></td>
</tr>
</tbody>
</table>
<p>Here’s how the first step is defined:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UX_STEP_NOCB</span><span class="p">(</span>
        <span class="n">step_destination_address</span><span class="p">,</span>
        <span class="n">bnnn_paging</span><span class="p">,</span>
        <span class="p">{</span>
                <span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Address&quot;</span><span class="p">,</span>
                <span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">g_address</span>
        <span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The first argument is the name that we are going to give to this step.</p></li>
<li><p>The second are what we call a <code class="code docutils literal notranslate"><span class="pre">layout</span></code> option.</p></li>
<li><p>The third argument goes hand-in-hand with the <code class="code docutils literal notranslate"><span class="pre">layout</span></code> option.</p></li>
</ul>
<p>It looks like the <code class="code docutils literal notranslate"><span class="pre">layout</span></code> is where the black-magic happens. Let’s have a closer look at <code class="code docutils literal notranslate"><span class="pre">layout</span></code> s!</p>
</div>
<div class="section" id="layouts">
<h3>Layouts<a class="headerlink" href="#layouts" title="Permalink to this headline">¶</a></h3>
<p>Layouts are nothing more than rules that specify the format / number of lines / fonts we are going to use on the screen.
They are easy to remember once you understand that:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">b</span></code> stands for <strong>bold</strong>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">n</span></code> stands for <strong>normal</strong>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">p</span></code> stands for <strong>picture</strong>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">paging</span></code> means that if the data doesn’t fit on screen, user will be able to navigate through multiple screens to see the data (e.g a public key).</p></li>
<li><p>And the number of letters used stands for the number of lines!</p></li>
</ul>
<p>Note that all combinations of letters are not possible. For example <code class="code docutils literal notranslate"><span class="pre">paging</span></code> only exists with <code class="code docutils literal notranslate"><span class="pre">bnnn</span></code>. <code class="code docutils literal notranslate"><span class="pre">nnnn</span></code> only exists on NanoX, etc…</p>
<p>Now that you know all that, here’s a table with the most commonly used layouts:</p>
<table class="colwidths-given docutils align-default" id="id2">
<caption><span class="caption-text">Most commonly used layouts</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 5%" />
<col style="width: 55%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Denomination</p></th>
<th class="head"><p>Comment</p></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">bn</span></code></p></td>
<td><p>Bold font for the first line, normal font for the second line.</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">bn,</span> <span class="pre">{&quot;BoldLine&quot;,</span> <span class="pre">&quot;NormalLine&quot;}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">pb</span></code></p></td>
<td><p>Picture for the first line, bold font for the second line.</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">pb,</span> <span class="pre">{&amp;RefToPicture,</span> <span class="pre">&quot;BoldLine&quot;}</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">pnn</span></code></p></td>
<td><p>Picture for the first line, normal font for the second line and third line.</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">pnn,</span> <span class="pre">{&amp;RefToPicture,</span> <span class="pre">&quot;NormalLine1&quot;,</span> <span class="pre">&quot;NormalLine2&quot;}</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bnnn_paging</span></code></p></td>
<td><p>Bold first line, normal fonts for the other lines. If the data to be displayed doesn’t fit on a single screen, the user will be able to navigate through different screens to see the whole text.</p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">bnnn_paging,</span> <span class="pre">{.title</span> <span class="pre">=</span> <span class="pre">&quot;BoldLine&quot;,</span> <span class="pre">.text</span> <span class="pre">=</span> <span class="pre">&quot;NormalLine&quot;}</span></code></p></td>
</tr>
</tbody>
</table>
<p>And here’s a table that compares how those layouts are displayed on a Nano S and on a Nano X!</p>
<p>Notice that the Nano X can fit up to 4 lines, whereas the Nano S can only fit 2!</p>
<table class="colwidths-given docutils align-default" id="id3">
<caption><span class="caption-text">Comparing end results on NanoS and NanoX</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 44%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>LAYOUT</p></th>
<th class="head"><p>NANOS</p></th>
<th class="head"><p>NANOX</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">pb</span></code></p></td>
<td><p><a class="reference internal" href="../_images/nanos_approve.png"><img alt="nanos_pb" src="../_images/nanos_approve.png" style="width: 261.0px; height: 64.0px;" /></a></p></td>
<td><p><a class="reference internal" href="../_images/nanox_approve.png"><img alt="nanox_pb" src="../_images/nanox_approve.png" style="width: 263.0px; height: 137.0px;" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bn</span></code></p></td>
<td><p><a class="reference internal" href="../_images/nanos_amount.png"><img alt="nanos_bn" src="../_images/nanos_amount.png" style="width: 257.0px; height: 61.0px;" /></a></p></td>
<td><p><a class="reference internal" href="../_images/nanox_amount.png"><img alt="nanox_bn" src="../_images/nanox_amount.png" style="width: 272.0px; height: 145.0px;" /></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">pnn</span></code></p></td>
<td><p><a class="reference internal" href="../_images/nanos_boilerplate.png"><img alt="nanos_pnn" src="../_images/nanos_boilerplate.png" style="width: 258.0px; height: 62.0px;" /></a></p></td>
<td><p><a class="reference internal" href="../_images/nanox_boilerplate.png"><img alt="nanox_pnn" src="../_images/nanox_boilerplate.png" style="width: 257.0px; height: 123.0px;" /></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">bnnn_paging</span></code></p></td>
<td><p><a class="reference internal" href="../_images/nanos_address.png"><img alt="nanos_bnnn_paging" src="../_images/nanos_address.png" style="width: 256.0px; height: 59.0px;" /></a></p></td>
<td><p><a class="reference internal" href="../_images/nanox_address.png"><img alt="nanox_bnnn_paging" src="../_images/nanox_address.png" style="width: 270.0px; height: 157.0px;" /></a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="menu">
<h3>Menu<a class="headerlink" href="#menu" title="Permalink to this headline">¶</a></h3>
<p>Here’s a typical flow for any app that will display its name (along with its logo), then its version, then the settings and finally a quit (along with a icon).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UX_STEP_NOCB</span><span class="p">(</span><span class="n">step_menu</span><span class="p">,</span> <span class="n">pnn</span><span class="p">,</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">C_app_logo</span><span class="p">,</span> <span class="s">&quot;App&quot;</span><span class="p">,</span> <span class="s">&quot;is ready&quot;</span><span class="p">});</span>
<span class="n">UX_STEP_NOCB</span><span class="p">(</span><span class="n">step_version</span><span class="p">,</span> <span class="n">bn</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;Version&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_version</span><span class="p">});</span>
<span class="n">UX_STEP_CB</span><span class="p">(</span><span class="n">step_settings</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">ui_settings_menu</span><span class="p">(),</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">C_icon_settings</span><span class="p">,</span> <span class="s">&quot;Settings&quot;</span><span class="p">})</span>
<span class="n">UX_STEP_CB</span><span class="p">(</span><span class="n">step_exit_step</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">os_sched_exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">C_icon_dashboard_x</span><span class="p">,</span> <span class="s">&quot;Quit&quot;</span><span class="p">});</span>

<span class="n">UX_FLOW</span><span class="p">(</span><span class="n">ux_app_dashboard</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_menu</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_version</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_settings</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_exit_step</span><span class="p">,</span>
                <span class="n">FLOW_LOOP</span>
<span class="p">);</span>
</pre></div>
</div>
<p>You guessed it, pressing both buttons when on the <cite>QUIT</cite> screen will call <code class="code docutils literal notranslate"><span class="pre">os_sched_exit(-1)</span></code>, effectively quitting the app. Pressing both button while on the <code class="code docutils literal notranslate"><span class="pre">Settings</span></code> screen will call <code class="code docutils literal notranslate"><span class="pre">ui_settings_menu()</span></code>, another function that you need to define with <code class="code docutils literal notranslate"><span class="pre">UX_FLOW</span></code> !
We also added the <code class="code docutils literal notranslate"><span class="pre">FLOW_LOOP</span></code> step at the end to have the menu wrap around. Users can now indefinitely cycle through the menu, yay!</p>
</div>
<div class="section" id="signing-a-transaction">
<h3>Signing a transaction<a class="headerlink" href="#signing-a-transaction" title="Permalink to this headline">¶</a></h3>
<p>Here’s the example of a flow to sign a transaction.
We first display “Confirm address” along with a picture, then use <code class="code docutils literal notranslate"><span class="pre">bnnn_paging</span></code> to
display the address because it might not fit on a single screen.
We then display the amount and the transactions fees, and finally added two callack steps:
the first one to confirm, the second one to reject.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">UX_STEP_NO_CB</span><span class="p">(</span><span class="n">step_review</span><span class="p">,</span> <span class="n">pn</span><span class="p">,</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">C_icon_eye</span><span class="p">,</span> <span class="s">&quot;Confirm Address&quot;</span><span class="p">});</span>
<span class="n">UX_STEP_NO_CB</span><span class="p">(</span><span class="n">step_address</span><span class="p">,</span> <span class="n">bnnn_paging</span><span class="p">,</span> <span class="p">{</span> <span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">&quot;Address&quot;</span><span class="p">,</span> <span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">g_destination_address</span><span class="p">});</span>
<span class="n">UX_STEP_NO_CB</span><span class="p">(</span><span class="n">step_amount</span><span class="p">,</span> <span class="n">bn</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;Amount&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_amount</span><span class="p">});</span>
<span class="n">UX_STEP_NO_CB</span><span class="p">(</span><span class="n">step_fees</span><span class="p">,</span> <span class="n">bn</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;Fees&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">g_fees</span><span class="p">});</span>
<span class="n">UX_STEP_CB</span><span class="p">(</span><span class="n">step_approve</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">sign_transaction</span><span class="p">(),</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">C_icon_validate_14</span><span class="p">,</span> <span class="s">&quot;Approve&quot;</span><span class="p">});</span>
<span class="n">UX_STEP_CB</span><span class="p">(</span><span class="n">step_reject</span><span class="p">,</span> <span class="n">pb</span><span class="p">,</span> <span class="n">reject_transaction</span><span class="p">(),</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">C_icon_crossmark</span><span class="p">,</span> <span class="s">&quot;Reject&quot;</span><span class="p">});</span>

<span class="n">UX_FLOW</span><span class="p">(</span><span class="n">ux_sign_transaction</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_review</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_address</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_amount</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_fees</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_approve</span><span class="p">,</span>
                <span class="o">&amp;</span><span class="n">step_reject</span>
        <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-display-management">
<h3>Advanced display management<a class="headerlink" href="#advanced-display-management" title="Permalink to this headline">¶</a></h3>
<p>A special <a class="reference internal" href="advanced_display_management.html"><span class="doc">advanced display management</span></a> section has been written where we go deeper in the inner-workings of display management.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="advanced_display_management.html" class="btn btn-neutral float-right" title="Advanced Display Management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="writing_apps.html" class="btn btn-neutral float-left" title="Writing Apps" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016 - 2019, Ledger Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>