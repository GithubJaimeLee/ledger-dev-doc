

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Application Environment &mdash; Ledger Documentation Hub 2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction" href="../userspace/introduction.html" />
    <link rel="prev" title="Hardware Architecture" href="hardware_architecture.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Ledger Documentation Hub
          

          
          </a>

          
            
            
              <div class="version">
                2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Background Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../background/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/personal_security_devices.html">Personal Security Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/master_seed.html">The Master Seed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/hd_keys.html">HD Key Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/hd_use_cases.html">Applications of HD Trees</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/application_isolation.html">Application Isolation</a></li>
</ul>
<p class="caption"><span class="caption-text">BOLOS Platform</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">BOLOS Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware_architecture.html">Hardware Architecture</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Application Environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#delegation-model">Delegation Model</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Userspace Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/writing_apps.html">Writing Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/display_management.html">Display Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/advanced_display_management.html">Advanced Display Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/syscalls.html">Interaction Between BOLOS and Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/application_structure.html">Application Structure and I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/memory.html">Persistent Storage and PIC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/alignment.html">Memory alignment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/troubleshooting.html">Common Pitfalls and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/debugging.html">Application Debug</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace/speculos.html">Emulating devices with Speculos</a></li>
</ul>
<p class="caption"><span class="caption-text">Additional Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../additional/publishing_an_app.html">Publishing an Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional/external_docs.html">External Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../additional/security_guidelines.html">Developing Secure Ledger Apps</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ledger Documentation Hub</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Application Environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/bolos/application_environment.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="application-environment">
<h1>Application Environment<a class="headerlink" href="#application-environment" title="Permalink to this headline">¶</a></h1>
<p>Due to its limited amount of RAM, the Secure Element is designed to only support
one application running at a time. This isolated model implies that once the
application is running, no other application can spuriously disturb the SE-MCU
link. It also means that BOLOS can give the currently running application full
control of I/O with the device’s peripherals. This model allowed the BOLOS
architecture to be designed in a way that gives applications as much control
over the device’s features as possible. In essence, each application runs in a
“virtual” device and can reconfigure all of the hardware as it pleases. BOLOS
<a class="reference internal" href="../background/application_isolation.html"><span class="doc">isolates the application</span></a> from the
other applications on the device, and restricts access to all areas of flash
memory other than those exclusively allocated for the running application.</p>
<p>This model has the tremendous advantage of not limiting what the application can
do, however it also implies that every application has to do <strong>all</strong> of the
heavy lifting involved in managing every layer of the transport protocols used
to communicate with the world outside of the SE. Luckily, the SDK implements all
I/O handling that typical applications need to do. However, developers have the
option to customize I/O protocols for more specialized applications.</p>
<div class="figure align-center" id="id1">
<img alt="Application-centric view" src="../_images/app_centric_view.png" />
<p class="caption"><span class="caption-text">The application-centric view of the BOLOS environment</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The above diagram shows a view of the system as seen by the application. The app
directly accesses multiple peripherals and is the real brain of the device while
it is running. Each box can be seen as a coprocessor, under direct command of
the application.</p>
<p>Some peripherals not only receive commands from the SE, but also trigger events
which are relayed back to the SE by the MCU. This is the case for buttons,
activated upon user actions, and I/O peripherals which can perform background
communication (for example, the USB controller) or convey requests to be
processed by the application.</p>
<p>In this model, the application is at the center, and does not rely on any other
embedded co-applications.</p>
<div class="section" id="delegation-model">
<h2>Delegation Model<a class="headerlink" href="#delegation-model" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id2">
<img alt="USB delegation overview" src="../_images/usb_delegation_overview.png" />
<p class="caption"><span class="caption-text">An overview of the USB delegation model</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Once BOLOS boots the application, BOLOS is not reachable anymore, it only
provides basic services to the application during its execution via system
calls. As a consequence, BOLOS does not process commands sent to the device from
peripherals (like USB) and therefore BOLOS does not play a role in I/O handling.</p>
<p>Featuring these two key points, applications are in charge on the device. This
allows them to customize not only the display, but user input actions, and by
extension, the way the device is enumerated on USB. If an application requires
Mass Storage emulation, or being seen as a WinUSB peripheral, it’s only a matter
of event handling.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../userspace/introduction.html" class="btn btn-neutral float-right" title="Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="hardware_architecture.html" class="btn btn-neutral float-left" title="Hardware Architecture" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016 - 2019, Ledger Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>